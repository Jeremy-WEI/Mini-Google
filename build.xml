<?xml version="1.0"?>

<project name="555_project" default="build" basedir=".">
    <property name="shared.root" location="${basedir}"/>
    <property name="file.separator" location="/"/>
    <property name="project.root" location="${basedir}"/>
    <property name="build.dir" location="${project.root}"/>
    <property name="build.target.dir" location="${project.root}${file.separator}target"/>
    <property name="classes.dir"     location="${basedir}${file.separator}classes"/>
    <property name="src.main.dir"  location="${build.dir}${file.separator}src${file.separator}"/>
    <property name="inputlib.dir"  location="${shared.root}${file.separator}lib"/>
    
    <target name="compile-database" description="Compiles the local database">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="src/cis555/crawler/database" destdir="${classes.dir}" debug="on" deprecation="off" optimize="on" includeAntRuntime="no">
            <classpath>
                <fileset dir="${inputlib.dir}">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
        </javac>
    </target>
    
    <target name="compile-crawler" depends="compile-database" description="Compiles the crawler">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="src/cis555/crawler" destdir="${classes.dir}" debug="on" deprecation="off" optimize="on" includeAntRuntime="no">
            <classpath>
                <fileset dir="${inputlib.dir}">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
        </javac>
    </target>
    
    <target name="clean" description="Deletes all the compiled files">
        <delete dir="${build.target.dir}"/>
        <delete file="crawler.jar"/>
    </target>
    
    <target name="crawler-jar" depends="compile-crawler" description="Makes the JAR file for the crawler">
        <delete file="crawler.jar"/>
        <jar destfile="crawler.jar" update="true">
            <fileset dir="${classes.dir}">
                <include name="**/*.class"/>
            </fileset>
        </jar>
    </target>

    <target name="build" depends="crawler-jar">
    </target>

</project>
